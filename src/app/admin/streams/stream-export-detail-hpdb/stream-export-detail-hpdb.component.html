<ng-container *ngIf="stream$ | async as stream; else loading">
	<ng-container *ngIf="sxport$ | async as sxport; else loading">
		<ng-container *ngIf="artifacts$ | async as artifacts; else loading">
			<div class="row my-1">
				<div class="col font-weight-bold">
					Export Details:
				</div>
			</div>
			<div class="row my-3">
				<div class="col">
					<div class="input-group input-group-sm">
						<div class="input-group-prepend">
							<span class="input-group-text">Name:</span>
						</div>
						<input type="text" name="ExportName" class="form-control" [(ngModel)]="sxport.name">
					</div>
				</div>
				<div class="col">
					<div class="btn-toolbar py-1">
						<div class="btn-group btn-group-xs ml-auto">
							<button type="submit" class="btn btn-outline-success" title="Save" (click)="update(stream, sxport)"><i class="fas fa-save fa-fw"></i></button>
							<button type="button" class="btn btn-outline-dark" (click)="clone(stream, sxport)" title="Clone"><i class="far fa-clone fa-fw"></i></button>
							<button type="button" class="btn btn-outline-danger" (click)="delete(stream, sxport)" title="Delete"><i class="far fa-trash-alt fa-fw"></i></button>
						</div>
					</div>
				</div>
			</div>
			<div class="row my-3">
				<div class="col">
					<div class="table-responsive">
						<table class="table table-sm table-bordered m-0">
							<thead class="border-bottom-0">
								<tr class="border-bottom-0">
									<th class="text-center border-0" width="10">&nbsp;</th>
									<th class="text-center border-bottom-0">Pages</th>
									<th class="text-center border-bottom-0">POVs</th>
									<th class="text-center border-bottom-0">Rows</th>
									<th class="text-center border-bottom-0">Columns</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<th class="text-nowrap">Dimension Layout:</th>
									<td>
										<div cdkDropList #pagDims="cdkDropList" [cdkDropListData]="sxport.pagDims" [cdkDropListConnectedTo]="[povDims, rowDims, colDims]" (cdkDropListDropped)="dimensionDrop($event)">
											<div class="btn-toolbar m-1" *ngFor="let dim of sxport.pagDims" cdkDrag>
												<div class="btn-group btn-group-xs">
													<button class="btn btn-outline-dark"><i class="fas fa-arrows-alt fa-fw"></i></button>
													<button class="btn btn-outline-dark dim text-left">{{dim.name}}</button>
												</div>
												<div class="btn-group btn-group-xs ml-auto">
													<button class="btn btn-outline-dark" [disabled]="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.Loading" title="Refresh Member List" (click)="refreshMembers(stream, dim)">
														<i class="fas fa-pause fa-fw" *ngIf="!artifacts[stream.id + '_' + dim.name]"></i>
														<i class="fas fa-pause fa-fw" *ngIf="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.NotLoaded"></i>
														<i class="fas fa-sync-alt fa-spin fa-fw" *ngIf="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.Loading"></i>
														<i class="fas fa-sync-alt fa-fw" *ngIf="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.Loaded"></i>
													</button>
												</div>
											</div>
										</div>
									</td>
									<td>
										<div cdkDropList #povDims="cdkDropList" [cdkDropListData]="sxport.povDims" [cdkDropListConnectedTo]="[pagDims, rowDims, colDims]" (cdkDropListDropped)="dimensionDrop($event)">
											<div class="btn-toolbar m-1" *ngFor="let dim of sxport.povDims" cdkDrag>
												<div class="btn-group btn-group-xs">
													<button class="btn btn-outline-dark"><i class="fas fa-arrows-alt fa-fw"></i></button>
													<button class="btn btn-outline-dark dim text-left">{{dim.name}}</button>
												</div>
												<div class="btn-group btn-group-xs ml-auto">
													<button class="btn btn-outline-dark" [disabled]="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.Loading" title="Refresh Member List" (click)="refreshMembers(stream, dim)">
														<i class="fas fa-pause fa-fw" *ngIf="!artifacts[stream.id + '_' + dim.name]"></i>
														<i class="fas fa-pause fa-fw" *ngIf="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.NotLoaded"></i>
														<i class="fas fa-sync-alt fa-spin fa-fw" *ngIf="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.Loading"></i>
														<i class="fas fa-sync-alt fa-fw" *ngIf="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.Loaded"></i>
													</button>
												</div>
											</div>
										</div>
									</td>
									<td>
										<div cdkDropList #rowDims="cdkDropList" [cdkDropListData]="sxport.rowDims" [cdkDropListConnectedTo]="[pagDims, povDims, colDims]" (cdkDropListDropped)="dimensionDrop($event)">
											<div class="btn-toolbar m-1 text-nowrap" *ngFor="let dim of sxport.rowDims" cdkDrag>
												<div class="btn-group btn-group-xs">
													<button class="btn btn-outline-dark"><i class="fas fa-arrows-alt fa-fw"></i></button>
													<button class="btn btn-outline-dark dim text-left">{{dim.name}}</button>
												</div>
												<div class="btn-group btn-group-xs ml-auto">
													<button class="btn btn-outline-dark" [disabled]="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.Loading" title="Refresh Member List" (click)="refreshMembers(stream, dim)">
														<i class="fas fa-pause fa-fw" *ngIf="!artifacts[stream.id + '_' + dim.name]"></i>
														<i class="fas fa-pause fa-fw" *ngIf="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.NotLoaded"></i>
														<i class="fas fa-sync-alt fa-spin fa-fw" *ngIf="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.Loading"></i>
														<i class="fas fa-sync-alt fa-fw" *ngIf="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.Loaded"></i>
													</button>
												</div>
											</div>
										</div>
									</td>
									<td>
										<div cdkDropList #colDims="cdkDropList" [cdkDropListData]="sxport.colDims" [cdkDropListConnectedTo]="[pagDims, povDims, rowDims]" (cdkDropListDropped)="dimensionDrop($event)">
											<div class="btn-toolbar m-1 text-nowrap" *ngFor="let dim of sxport.colDims" cdkDrag>
												<div class="btn-group btn-group-xs">
													<button class="btn btn-outline-dark"><i class="fas fa-arrows-alt fa-fw"></i></button>
													<button class="btn btn-outline-dark dim text-left">{{dim.name}}</button>
												</div>
												<div class="btn-group btn-group-xs ml-auto">
													<button class="btn btn-outline-dark" [disabled]="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.Loading" title="Refresh Member List" (click)="refreshMembers(stream, dim)">
														<i class="fas fa-pause fa-fw" *ngIf="!artifacts[stream.id + '_' + dim.name]"></i>
														<i class="fas fa-pause fa-fw" *ngIf="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.NotLoaded"></i>
														<i class="fas fa-sync-alt fa-spin fa-fw" *ngIf="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.Loading"></i>
														<i class="fas fa-sync-alt fa-fw" *ngIf="artifacts[stream.id + '_' + dim.name]?.loadState == LoadStates.Loaded"></i>
													</button>
												</div>
											</div>
										</div>
									</td>
								</tr>
								<tr>
									<th class="text-nowrap">Member Selections:</th>
									<td>
										<div class="btn-toolbar m-1" *ngFor="let dim of sxport.pagDims">
											<div class="btn-group btn-group-xs" title="Choose Member(s)" (click)="openMemberSelector(stream, dim.name, sxport.pags)">
												<button type="button" class="btn btn-outline-dark dim text-left">{{dim.name}}</button>
												<button type="button" class="btn btn-outline-dark member-selections text-truncate">
													Selected MembersSelected MembersSelected MembersSelected MembersSelected MembersSelected Members
												</button>
												<button type="button" class="btn btn-outline-dark">
													<i class="fas fa-crosshairs fa-fw"></i>
												</button>

											</div>
										</div>
										<pre>{{ sxport.pags | json }}</pre>
									</td>
									<td></td>
									<td></td>
									<td></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			</div>
			<div class="row my-1">
				<div class="col">
					Pages:

				</div>
				<div class="col">
					POVs:

				</div>
				<!-- </div>
		<div class="row my-1"> -->
				<div class="col">
					Rows:

				</div>
				<div class="col">
					Columns:

				</div>
			</div>
			<pre>{{sxport | json}}</pre>
			<pre>{{stream.fieldList | json}}</pre>
		</ng-container>
	</ng-container>
</ng-container>
<ng-template #loading>
	<div class="alert alert-info mx-3" role="alert">
		<i class="fas fa-circle-notch fa-spin"></i> Please wait loading...
	</div>
</ng-template>
